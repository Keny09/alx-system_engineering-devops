#!/usr/bin/env bash
# Check if the script is run as root
if [ "$EUID" -ne 0 ]; then
	echo "Please run the script as root."
	exit 1
fi

# Backup the original hosts file
cp /etc/hosts /etc/hosts.bak

# Modify the hosts file to change localhost and facebook.com resolutions
echo "127.0.0.2 localhost" >> /etc/hosts
echo "8.8.8.8 facebook.com" >> /etc/hosts

echo "Hosts file modified. New configurations:"
cat /etc/hosts

# Flush the DNS cache to apply the changes immediately
if command -v systemd-resolve &>/dev/null; then
  systemd-resolve --flush-caches
else
  service nscd restart
fi

echo "Changes applied successfully."
