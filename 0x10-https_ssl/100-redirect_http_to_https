# HAProxy configuration file

global
    log /dev/log    local0
    chroot /var/lib/haproxy
    pidfile /var/run/haproxy.pid
    maxconn 4096
    user haproxy
    group haproxy
    daemon

defaults
    mode http
    log global
    option httplog
    option dontlognull
    retries 3
    timeout connect 5000
    timeout client 50000
    timeout server 50000

frontend http
    bind *:80
    redirect scheme https code 301 if !{ ssl_fc }

backend https
    bind *:443
    server server1 127.0.0.1:8080
    server server2 127.0.0.2:8080